<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ruleta de Medicamentos Hospitalarios</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      text-align: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 5px;
    }

    .ruleta-container {
      position: relative;
      width: 300px;
      height: 300px;
      margin: 30px auto;
    }

    .ruleta {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 6px solid #333;
      position: relative;
      overflow: hidden;
      transform: rotate(0deg);
      transition: transform 3s ease-out;
    }

    .sector {
      position: absolute;
      width: 50%;
      height: 50%;
      transform-origin: 100% 100%;
      background: #ddd;
      border: 1px solid #fff;
    }

    .sector span {
      position: absolute;
      top: 60%;
      left: 60%;
      transform: rotate(45deg);
      font-size: 12px;
      font-weight: bold;
    }

    .flecha {
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 30px solid red;
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 20px;
    }

    .pregunta {
      margin-top: 30px;
      display: none;
    }

    .opcion {
      background: #fff;
      padding: 10px;
      margin: 8px auto;
      width: 60%;
      border: 1px solid #ccc;
      cursor: pointer;
    }

    .opcion:hover {
      background: #e9e9e9;
    }

    .correcta {
      background: #c8f7c5;
    }

    .incorrecta {
      background: #f7c5c5;
    }
  </style>
</head>
<body>

<h1>Ruleta de Medicamentos Hospitalarios</h1>
<p>Familia farmacológica y función</p>

<div class="ruleta-container">
  <div class="flecha"></div>
  <div class="ruleta" id="ruleta"></div>
</div>

<button onclick="girarRuleta()">Girar ruleta</button>

<div class="pregunta" id="zonaPregunta">
  <h2 id="textoPregunta"></h2>
  <div id="opciones"></div>
  <button onclick="siguientePregunta()" id="btnSiguiente" style="display:none;">Siguiente</button>
</div>

<script>
/* ===== TEMAS ===== */
const temas = [
  "Analgésicos",
  "Antibióticos",
  "Cardiovasculares",
  "Endocrinos",
  "Gastrointestinales",
  "Respiratorios"
];

/* ===== PREGUNTAS POR TEMA ===== */
const bancoPreguntas = {
  "Analgésicos": [
    {
      pregunta: "¿A qué familia pertenece el paracetamol?",
      opciones: ["Analgésico-antipirético", "Antibiótico", "Corticoide"],
      correcta: 0
    },
    {
      pregunta: "Función principal de la morfina:",
      opciones: ["Analgésico opioide potente", "Antiinflamatorio", "Antipirético"],
      correcta: 0
    },
    {
      pregunta: "El tramadol es:",
      opciones: ["Analgésico opioide", "Anticoagulante", "Diurético"],
      correcta: 0
    }
  ],

  "Antibióticos": [
    {
      pregunta: "La ceftriaxona pertenece a:",
      opciones: ["Cefalosporinas", "Macrólidos", "Aminoglucósidos"],
      correcta: 0
    },
    {
      pregunta: "El metronidazol es eficaz contra:",
      opciones: ["Bacterias anaerobias", "Virus", "Hongos"],
      correcta: 0
    },
    {
      pregunta: "La amoxicilina es un:",
      opciones: ["Betalactámico", "Quinolona", "Antifúngico"],
      correcta: 0
    }
  ],

  "Cardiovasculares": [
    {
      pregunta: "La furosemida es un:",
      opciones: ["Diurético de asa", "IECA", "Betabloqueador"],
      correcta: 0
    },
    {
      pregunta: "La adrenalina se usa principalmente para:",
      opciones: ["Emergencias y paro", "Hipertensión crónica", "Dolor leve"],
      correcta: 0
    },
    {
      pregunta: "La noradrenalina actúa como:",
      opciones: ["Vasopresor", "Analgésico", "Sedante"],
      correcta: 0
    }
  ],

  "Endocrinos": [
    {
      pregunta: "La insulina NPH es:",
      opciones: ["Acción intermedia", "Acción rápida", "Acción ultralenta"],
      correcta: 0
    },
    {
      pregunta: "La metformina se usa en:",
      opciones: ["Diabetes tipo 2", "Hipotiroidismo", "Hipertensión"],
      correcta: 0
    },
    {
      pregunta: "La levotiroxina reemplaza:",
      opciones: ["Hormona tiroidea", "Insulina", "Cortisol"],
      correcta: 0
    }
  ],

  "Gastrointestinales": [
    {
      pregunta: "El omeprazol es un:",
      opciones: ["Inhibidor de bomba de protones", "Antiemético", "Laxante"],
      correcta: 0
    },
    {
      pregunta: "La metoclopramida se usa como:",
      opciones: ["Antiemético", "Analgésico", "Antibiótico"],
      correcta: 0
    },
    {
      pregunta: "La buscapina es:",
      opciones: ["Antiespasmódico", "Antiinflamatorio", "Anticoagulante"],
      correcta: 0
    }
  ],

  "Respiratorios": [
    {
      pregunta: "El salbutamol es un:",
      opciones: ["Broncodilatador", "Antibiótico", "Corticoide"],
      correcta: 0
    },
    {
      pregunta: "El atrovent actúa como:",
      opciones: ["Broncodilatador anticolinérgico", "Antihistamínico", "Antitusígeno"],
      correcta: 0
    },
    {
      pregunta: "La dexametasona es:",
      opciones: ["Corticoide", "Analgésico", "Antibiótico"],
      correcta: 0
    }
  ]
};

/* ===== RUEDA ===== */
const ruleta = document.getElementById("ruleta");
const zonaPregunta = document.getElementById("zonaPregunta");
const textoPregunta = document.getElementById("textoPregunta");
const opcionesDiv = document.getElementById("opciones");
const btnSiguiente = document.getElementById("btnSiguiente");

let preguntasTema = [];
let indicePregunta = 0;
let temaActual = "";

/* Crear sectores */
temas.forEach((tema, i) => {
  const sector = document.createElement("div");
  sector.className = "sector";
  sector.style.transform = `rotate(${i * (360 / temas.length)}deg)`;
  sector.style.background = i % 2 === 0 ? "#b3d9ff" : "#d1e7dd";

  const texto = document.createElement("span");
  texto.textContent = tema;

  sector.appendChild(texto);
  ruleta.appendChild(sector);
});

function girarRuleta() {
  zonaPregunta.style.display = "none";
  btnSiguiente.style.display = "none";

  const vueltas = 3;
  const angulo = Math.floor(Math.random() * 360);
  const rotacion = vueltas * 360 + angulo;

  ruleta.style.transform = `rotate(${rotacion}deg)`;

  setTimeout(() => {
    const sector = Math.floor(((360 - angulo) % 360) / (360 / temas.length));
    temaActual = temas[sector];
    preguntasTema = [...bancoPreguntas[temaActual]];
    indicePregunta = 0;
    mostrarPregunta();
  }, 3000);
}

function mostrarPregunta() {
  const p = preguntasTema[indicePregunta];
  textoPregunta.textContent = `${temaActual}: ${p.pregunta}`;
  opcionesDiv.innerHTML = "";
  zonaPregunta.style.display = "block";

  p.opciones.forEach((op, i) => {
    const div = document.createElement("div");
    div.className = "opcion";
    div.textContent = op;
    div.onclick = () => seleccionarOpcion(div, i);
    opcionesDiv.appendChild(div);
  });
}

function seleccionarOpcion(div, index) {
  const p = preguntasTema[indicePregunta];
  document.querySelectorAll(".opcion").forEach(o => o.onclick = null);

  if (index === p.correcta) {
    div.classList.add("correcta");
  } else {
    div.classList.add("incorrecta");
    opcionesDiv.children[p.correcta].classList.add("correcta");
  }

  btnSiguiente.style.display = "inline-block";
}

function siguientePregunta() {
  indicePregunta++;
  btnSiguiente.style.display = "none";

  if (indicePregunta < preguntasTema.length) {
    mostrarPregunta();
  } else {
    alert("Fin de las preguntas de este tema.");
    zonaPregunta.style.display = "none";
  }
}
</script>

</body>
</html>

