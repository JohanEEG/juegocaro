<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ruleta de Medicamentos Hospitalarios üè•</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(to bottom, #e6f0ff, #ffffff);
      margin: 0;
      padding: 20px;
      text-align: center;
      min-height: 100vh;
    }
    h1 {
      color: #1e40af;
      margin: 10px 0 5px;
      font-size: 2em;
    }
    p.subtitle {
      color: #4b5563;
      margin: 0 0 20px;
      font-size: 1.1em;
    }
    .ruleta-container {
      position: relative;
      width: min(320px, 80vw);
      height: min(320px, 80vw);
      margin: 30px auto;
    }
    .ruleta {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 8px solid #1e293b;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
      transform: rotate(0deg);
      transition: transform 4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .sector {
      position: absolute;
      width: 50%;
      height: 50%;
      transform-origin: 100% 100%;
      clip-path: polygon(0 0, 100% 0, 100% 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .sector span {
      position: absolute;
      font-size: 14px;
      font-weight: bold;
      color: #111827;
      text-align: center;
      width: 120px;
      transform: translate(-50%, -50%) rotate(90deg);
      white-space: nowrap;
    }
    .flecha {
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 40px solid #dc2626;
      position: absolute;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
      z-index: 10;
    }
    button {
      padding: 12px 30px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      border: none;
      border-radius: 30px;
      background: #3b82f6;
      color: white;
      margin: 15px 10px;
      transition: all 0.2s;
    }
    button:hover {
      background: #2563eb;
      transform: translateY(-2px);
    }
    button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }
    .pregunta {
      margin: 30px auto;
      max-width: 700px;
      display: none;
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .opcion {
      background: #f3f4f6;
      padding: 15px;
      margin: 12px auto;
      width: 80%;
      max-width: 500px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 1.05em;
    }
    .opcion:hover {
      background: #e5e7eb;
      transform: scale(1.02);
    }
    .correcta {
      background: #86efac !important;
      color: #065f46;
      font-weight: bold;
    }
    .incorrecta {
      background: #fca5a5 !important;
      color: #7f1d1d;
    }
    @media (max-width: 500px) {
      h1 { font-size: 1.6em; }
      .pregunta { padding: 15px; }
      .opcion { width: 95%; padding: 12px; }
    }
  </style>
</head>
<body>

<h1>Ruleta de Medicamentos Hospitalarios üè•</h1>
<p class="subtitle">Familia farmacol√≥gica y funci√≥n principal</p>

<div class="ruleta-container">
  <div class="flecha"></div>
  <div class="ruleta" id="ruleta"></div>
</div>

<button id="btnGirar" onclick="girarRuleta()">Girar ruleta üé∞</button>

<div class="pregunta" id="zonaPregunta">
  <h2 id="textoPregunta"></h2>
  <div id="opciones"></div>
  <button id="btnSiguiente" onclick="siguientePregunta()" style="display:none;">Siguiente pregunta ‚Üí</button>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const temas = [
  "Analg√©sicos",
  "Antibi√≥ticos",
  "Cardiovasculares",
  "Endocrinos",
  "Gastrointestinales",
  "Respiratorios"
];

const bancoPreguntas = { /* tu objeto de preguntas igual que antes */ 
  "Analg√©sicos": [
    { pregunta: "¬øA qu√© familia pertenece el paracetamol?", opciones: ["Analg√©sico-antipir√©tico", "Antibi√≥tico", "Corticoide"], correcta: 0 },
    { pregunta: "Funci√≥n principal de la morfina:", opciones: ["Analg√©sico opioide potente", "Antiinflamatorio", "Antipir√©tico"], correcta: 0 },
    { pregunta: "El tramadol es:", opciones: ["Analg√©sico opioide", "Anticoagulante", "Diur√©tico"], correcta: 0 }
  ],
  "Antibi√≥ticos": [
    { pregunta: "La ceftriaxona pertenece a:", opciones: ["Cefalosporinas", "Macr√≥lidos", "Aminogluc√≥sidos"], correcta: 0 },
    { pregunta: "El metronidazol es eficaz contra:", opciones: ["Bacterias anaerobias", "Virus", "Hongos"], correcta: 0 },
    { pregunta: "La amoxicilina es un:", opciones: ["Betalact√°mico", "Quinolona", "Antif√∫ngico"], correcta: 0 }
  ],
  "Cardiovasculares": [
    { pregunta: "La furosemida es un:", opciones: ["Diur√©tico de asa", "IECA", "Betabloqueador"], correcta: 0 },
    { pregunta: "La adrenalina se usa principalmente para:", opciones: ["Emergencias y paro", "Hipertensi√≥n cr√≥nica", "Dolor leve"], correcta: 0 },
    { pregunta: "La noradrenalina act√∫a como:", opciones: ["Vasopresor", "Analg√©sico", "Sedante"], correcta: 0 }
  ],
  "Endocrinos": [
    { pregunta: "La insulina NPH es:", opciones: ["Acci√≥n intermedia", "Acci√≥n r√°pida", "Acci√≥n ultralenta"], correcta: 0 },
    { pregunta: "La metformina se usa en:", opciones: ["Diabetes tipo 2", "Hipotiroidismo", "Hipertensi√≥n"], correcta: 0 },
    { pregunta: "La levotiroxina reemplaza:", opciones: ["Hormona tiroidea", "Insulina", "Cortisol"], correcta: 0 }
  ],
  "Gastrointestinales": [
    { pregunta: "El omeprazol es un:", opciones: ["Inhibidor de bomba de protones", "Antiem√©tico", "Laxante"], correcta: 0 },
    { pregunta: "La metoclopramida se usa como:", opciones: ["Antiem√©tico", "Analg√©sico", "Antibi√≥tico"], correcta: 0 },
    { pregunta: "La buscapina es:", opciones: ["Antiespasm√≥dico", "Antiinflamatorio", "Anticoagulante"], correcta: 0 }
  ],
  "Respiratorios": [
    { pregunta: "El salbutamol es un:", opciones: ["Broncodilatador", "Antibi√≥tico", "Corticoide"], correcta: 0 },
    { pregunta: "El atrovent act√∫a como:", opciones: ["Broncodilatador anticolin√©rgico", "Antihistam√≠nico", "Antitus√≠geno"], correcta: 0 },
    { pregunta: "La dexametasona es:", opciones: ["Corticoide", "Analg√©sico", "Antibi√≥tico"], correcta: 0 }
  ]
};

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const ruleta = document.getElementById("ruleta");
const zonaPregunta = document.getElementById("zonaPregunta");
const textoPregunta = document.getElementById("textoPregunta");
const opcionesDiv = document.getElementById("opciones");
const btnSiguiente = document.getElementById("btnSiguiente");
const btnGirar = document.getElementById("btnGirar");

let preguntasTema = [];
let indicePregunta = 0;
let temaActual = "";

// Colores m√°s variados y bonitos para sectores
const colores = ["#bfdbfe", "#bbf7d0", "#fed7aa", "#fecaca", "#ddd6fe", "#a7f3d0"];

// Crear sectores
temas.forEach((tema, i) => {
  const sector = document.createElement("div");
  sector.className = "sector";
  sector.style.transform = `rotate(${i * (360 / temas.length)}deg)`;
  sector.style.background = colores[i % colores.length];

  const texto = document.createElement("span");
  texto.textContent = tema;
  sector.appendChild(texto);
  ruleta.appendChild(sector);
});

// Funci√≥n para barajar array (Fisher-Yates)
function shuffleArray(array) {
  const copy = [...array];
  for (let i = copy.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [copy[i], copy[j]] = [copy[j], copy[i]];
  }
  return copy;
}

function girarRuleta() {
  zonaPregunta.style.display = "none";
  btnSiguiente.style.display = "none";
  btnGirar.disabled = true;

  const vueltas = 5 + Math.random() * 3; // 5 a 8 vueltas
  const anguloExtra = Math.random() * 360;
  const rotacion = vueltas * 360 + anguloExtra;

  ruleta.style.transform = `rotate(${rotacion}deg)`;

  setTimeout(() => {
    // Calcular sector apuntado (ajustado por la rotaci√≥n)
    const anguloFinal = rotacion % 360;
    const sectorIdx = Math.floor((360 - anguloFinal) / (360 / temas.length)) % temas.length;
    temaActual = temas[sectorIdx];

    preguntasTema = shuffleArray(bancoPreguntas[temaActual]); // barajar orden de preguntas tambi√©n
    indicePregunta = 0;
    mostrarPregunta();
    btnGirar.disabled = false;
  }, 4000);
}

function mostrarPregunta() {
  if (indicePregunta >= preguntasTema.length) {
    alert(`¬°Terminaste el tema "${temaActual}"! üéâ Puedes girar de nuevo para otro tema.`);
    zonaPregunta.style.display = "none";
    return;
  }

  const p = preguntasTema[indicePregunta];
  textoPregunta.textContent = `${temaActual}: ${p.pregunta}`;

  // Barajar opciones y recordar nueva posici√≥n correcta
  const opcionesBarajadas = shuffleArray(p.opciones);
  const indiceCorrectoBarajado = opcionesBarajadas.indexOf(p.opciones[p.correcta]);

  opcionesDiv.innerHTML = "";
  zonaPregunta.style.display = "block";

  opcionesBarajadas.forEach((op, i) => {
    const div = document.createElement("div");
    div.className = "opcion";
    div.textContent = op;
    div.onclick = () => {
      document.querySelectorAll(".opcion").forEach(o => o.onclick = null);
      if (i === indiceCorrectoBarajado) {
        div.classList.add("correcta");
      } else {
        div.classList.add("incorrecta");
        opcionesDiv.children[indiceCorrectoBarajado].classList.add("correcta");
      }
      btnSiguiente.style.display = "inline-block";
    };
    opcionesDiv.appendChild(div);
  });
}

function siguientePregunta() {
  btnSiguiente.style.display = "none";
  indicePregunta++;
  mostrarPregunta();
}
</script>
</body>
</html>
